{
  "pageContent": "File Path: src/net/jforum/dao/generic/GenericPostDAO.java\n\n Original Content: rs = p.executeQuery();\n\n\t\t\tif (rs.next()) {\n\t\t\t\ttotal = rs.getInt(1);\n\t\t\t}\n\n\t\t\treturn total;\n\t\t}\n\t\tcatch (SQLException e) {\n\t\t\tthrow new DatabaseException(e);\n\t\t}\n\t\tfinally {\n\t\t\tDbUtils.close(rs, p);\n\t\t}\n\t}\n\n\t/**\n\t * @see net.jforum.model.PostModel#countPreviousPosts(int)\n\t */\n\tpublic int countPreviousPosts(int postId)\n\t{\n\t\tint total = 0;\n\n\t\tPreparedStatement p = null;\n\t\tResultSet rs = null;\n\t\ttry {\n\t\t\tp = JForumExecutionContext.getConnection().prepareStatement(\n\t\t\t\t\tSystemGlobals.getSql(\"PostModel.countPreviousPosts\"));\n\t\t\tp.setInt(1, postId);\n\t\t\tp.setInt(2, postId);\n\n\t\t\trs = p.executeQuery();\n\n\t\t\tif (rs.next()) {\n\t\t\t\ttotal = rs.getInt(1);\n\t\t\t}\n\n\t\t\treturn total;\n\t\t}\n\t\tcatch (SQLException e) {\n\t\t\tthrow new DatabaseException(e);\n\t\t}\n\t\tfinally {\n\t\t\tDbUtils.close(rs, p);\n\t\t}\n\t}\n\n\tpublic List selectLatestByForumForRSS(int forumId, int limit) \n\t{\n\t\tList l = new ArrayList();\n\t\t\n\t\tPreparedStatement p = null;\n\t\tResultSet rs = null;\n\t\t\n\t\ttry {\n\t\t\tp = JForumExecutionContext.getConnection().prepareStatement(\n\t\t\t\tSystemGlobals.getSql(\"PostModel.selectLatestByForumForRSS\"));\n\t\t\tp.setInt(1, forumId);\n\t\t\tp.setInt(2, limit);\n\t\t\t\n\t\t\trs = p.executeQuery();\n\t\t\t\n\t\t\twhile (rs.next()) {\n\t\t\t\tPost post = this.buildPostForRSS(rs);\n\t\t\t\tl.add(post);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\tcatch (SQLException e) {\n\t\t\tthrow new DatabaseException(e);\n\t\t}\n\t\tfinally {\n\t\t\tDbUtils.close(rs, p);\n\t\t}\n\t\t\n\t\treturn l;\n\t}\n\t\n\tpublic List selectHotForRSS(int limit) \n\t{\n\t\tList l = new ArrayList();\n\t\t\n\t\tPreparedStatement p = null;\n\t\tResultSet rs = null;\n\t\t\n\t\ttry {\n\t\t\tp = JForumExecutionContext.getConnection().prepareStatement(\n\t\t\t\tSystemGlobals.getSql(\"PostModel.selectHotForRSS\"));\n\t\t\tp.setInt(1, limit);\n\t\t\t\n\t\t\trs = p.executeQuery();\n\t\t\t\n\t\t\twhile (rs.next()) {\n\t\t\t\tPost post = this.buildPostForRSS(rs);\n\t\t\t\tl.add(post);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\tcatch (SQLException e) {\n\t\t\tthrow new DatabaseException(e);\n\t\t}\n\t\tfinally {\n\t\t\tDbUtils.close(rs, p);\n\t\t}\n\t\t\n\t\treturn l;\n\t}\n\n\tprivate Post buildPostForRSS(ResultSet rs) throws SQLException \n\t{\n\t\tPost post = new Post();\n\t\t\n\t\tpost.setId(rs.getInt(\"post_id\"));\n\t\tpost.setSubject(rs.getString(\"subject\"));\n\t\tpost.setText(rs.getString(\"post_text\"));\n\t\tpost.setTopicId(rs.getInt(\"topic_id\"));\n\t\tpost.setForumId(rs.getInt(\"forum_id\")); \n\t\tpost.setUserId(rs.getInt(\"user_id\"));\n\t\tpost.setPostUsername(rs.getString(\"username\"));\n\t\tpost.setTime(new Date(rs.getTimestamp(\"post_time\").getTime()));\n\t\t\n\t\treturn post;\n\t}\n}",
  "metadata": {
    "fileId": "GenericPostDAO_java_chunk_3",
    "fileName": "GenericPostDAO.java",
    "filePath": "src/net/jforum/dao/generic/GenericPostDAO.java"
  }
}