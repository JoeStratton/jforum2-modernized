{
  "pageContent": "File Path: src/net/jforum/util/legacy/clickstream/ClickstreamFilter.java\n\n Original Content: package net.jforum.util.legacy.clickstream;\n\nimport java.io.IOException;\n\nimport javax.servlet.Filter;\nimport javax.servlet.FilterChain;\nimport javax.servlet.FilterConfig;\nimport javax.servlet.ServletException;\nimport javax.servlet.ServletRequest;\nimport javax.servlet.ServletResponse;\nimport javax.servlet.http.HttpServletRequest;\n\nimport net.jforum.util.preferences.ConfigKeys;\n\nimport org.apache.log4j.Logger;\n\n/**\n * The filter that keeps track of a new entry in the clickstream for <b>every request</b>.\n * \n * @author <a href=\"plightbo@hotmail.com\">Patrick Lightbody</a>\n * @author Rafael Steil (little hacks for JForum)\n * @version $Id: ClickstreamFilter.java,v 1.6 2007/09/20 16:07:09 rafaelsteil Exp $\n */\npublic class ClickstreamFilter implements Filter\n{\n\tprivate static final Logger log = Logger.getLogger(ClickstreamFilter.class);\n\n\t/**\n\t * Attribute name indicating the filter has been applied to a given request.\n\t */\n\tprivate final static String FILTER_APPLIED = \"_clickstream_filter_applied\";\n\n\t/**\n\t * Processes the given request and/or response.\n\t * \n\t * @param request The request\n\t * @param response The response\n\t * @param chain The processing chain\n\t * @throws IOException If an error occurs\n\t * @throws ServletException If an error occurs\n\t */\n\tpublic void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException,\n\t\t\tServletException\n\t{\n\t\t// Ensure that filter is only applied once per request.\n\t\tif (request.getAttribute(FILTER_APPLIED) == null) {\n\t\t\trequest.setAttribute(FILTER_APPLIED, Boolean.TRUE);\n\t\t\t\n\t\t\tString bot = BotChecker.isBot((HttpServletRequest)request);\n\t\t\t\n\t\t\tif (bot != null && log.isDebugEnabled()) {\n\t\t\t\tlog.debug(\"Found a bot: \" + bot);\n\t\t\t}\n\t\t\t\n\t\t\trequest.setAttribute(ConfigKeys.IS_BOT, Boolean.valueOf(bot != null));\n\t\t}\n\t\t\n\t\t// Pass the request on\n\t\tchain.doFilter(request, response);\n\t}\n\n\t/**\n\t * Initializes this filter.\n\t * \n\t * @param filterConfig The filter configuration\n\t * @throws ServletException If an error occurs\n\t */\n\tpublic void init(FilterConfig filterConfig) throws ServletException {}\n\n\t/**\n\t * Destroys this filter.\n\t */\n\tpublic void destroy() {}\n}",
  "metadata": {
    "fileId": "ClickstreamFilter_java_chunk_1",
    "fileName": "ClickstreamFilter.java",
    "filePath": "src/net/jforum/util/legacy/clickstream/ClickstreamFilter.java"
  }
}