{
  "pageContent": "File Path: src/net/jforum/view/admin/BannerAction.java\n\n Original Content: /*\n * Copyright (c) 2003, 2004 Rafael Steil\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms,\n * with or without modification, are permitted provided\n * that the following conditions are met:\n *\n * 1) Redistributions of source code must retain the above\n * copyright notice, this list of conditions and the\n * following  disclaimer.\n * 2)  Redistributions in binary form must reproduce the\n * above copyright notice, this list of conditions and\n * the following disclaimer in the documentation and/or\n * other materials provided with the distribution.\n * 3) Neither the name of \"Rafael Steil\" nor\n * the names of its contributors may be used to endorse\n * or promote products derived from this software without\n * specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT\n * HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING,\n * BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n * MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL\n * THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n * OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER\n * IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN\n * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE\n *\n * This file creation date: Mar 31, 2005 / 11:21:41 AM\n * The JForum Project\n * http://www.jforum.net\n */\npackage net.jforum.view.admin;\n\nimport net.jforum.dao.BannerDAO;\nimport net.jforum.dao.DataAccessDriver;\nimport net.jforum.entities.Banner;\nimport net.jforum.util.I18n;\nimport net.jforum.util.preferences.TemplateKeys;\n\n/**\n * ViewHelper class for banner administration.\n *\n * @author Samuel Yung\n * @version $Id: BannerAction.java,v 1.5 2006/08/20 12:19:14 sergemaslyukov Exp $\n */\npublic class BannerAction extends AdminCommand\n{\n\t// Listing\n\tpublic void list()\n\t{\n\t\tthis.context.put(\"banners\",\n\t\t\tDataAccessDriver.getInstance().newBannerDAO().selectAll());\n\t\tthis.setTemplateName(TemplateKeys.BANNER_LIST);\n\t}\n\n\t// Insert\n\tpublic void insert()\n\t{\n\t\tthis.context.put(\"action\", \"insertSave\");\n\t\tthis.setTemplateName(TemplateKeys.BANNER_INSERT);\n\t}\n\n\t// Saves a new banner\n\tpublic void insertSave()\n\t{\n\t\tBannerDAO dao = DataAccessDriver.getInstance().newBannerDAO();\n\n\t\tdao.addNew(getBanner());\n\n\t\tthis.list();\n\t}\n\n\t// Edit a banner\n\tpublic void edit()\n\t{\n\t\tint bannerId = this.request.getIntParameter(\"banner_id\");\n\t\tBannerDAO dao = DataAccessDriver.getInstance().newBannerDAO();\n\n\t\tthis.context.put(\"banner\", dao.selectById(bannerId));\n\t\tthis.setTemplateName(TemplateKeys.BANNER_EDIT);\n\t\tthis.context.put(\"action\", \"editSave\");\n\t}\n\n\t// Save information for an existing banner\n\tpublic void editSave() \n\t{\n\t\tint bannerId = this.request.getIntParameter(\"banner_id\");\n\n\t\tBanner banner = getBanner();\n\t\tbanner.setId(bannerId);\n\n\t\tDataAccessDriver.getInstance().newBannerDAO().update(banner);\n\n\t\tthis.list();\n\t}\n\n\t// Delete a banner\n\tpublic void delete() \n\t{\n\t\tString bannerId = this.request.getParameter(\"banner_id\");\n\t\tif(bannerId == null)\n\t\t{\n\t\t\tthis.list();\n\t\t\treturn;\n\t\t}\n\n\t\tBannerDAO dao = DataAccessDriver.getInstance().newBannerDAO();\n\n\t\tint id = Integer.parseInt(bannerId);\n\t\tif(dao.canDelete(id))\n\t\t{\n\t\t\tdao.delete(id);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.context.put(\"errorMessage\",\n\t\t\t\tI18n.getMessage(I18n.CANNOT_DELETE_BANNER));\n\t\t}\n\n\t\tthis.list();\n\t}\n\n\tprotected Banner getBanner()\n\t{\n\t\tBanner b = new Banner();\n\t\tb.setComment(request.getParameter(\"comment\"));\n\t\tb.setActive(request.getIntParameter(\"active\") == 1);\n\t\tb.setType(Integer.parseInt(request.getParameter(\"type\")));\n\t\tb.setName(request.getParameter(\"name\"));\n\t\tb.setDescription(request.getParameter(\"description\"));\n\t\tb.setWidth(Integer.parseInt(request.getParameter(\"width\")));\n\t\tb.setHeight(Integer.parseInt(request.getParameter(\"height\")));\n\t\tb.setUrl(request.getParameter(\"url\"));\n\t\tb.setPlacement(Integer.parseInt(request.getParameter(\n\t\t\t\"placement\")));\n\t\tb.setWeight(Integer.parseInt(request.getParameter(\"weight\")));\n\t\tb.setViews(Integer.parseInt(request.getParameter(\"views\")));\n\t\tb.setClicks(Integer.parseInt(request.getParameter(\"clicks\")));\n\n\t\treturn b;\n\t}\n}",
  "metadata": {
    "fileId": "BannerAction_java_chunk_1",
    "fileName": "BannerAction.java",
    "filePath": "src/net/jforum/view/admin/BannerAction.java"
  }
}